# ADR.005 Выбор интеграционного протокола взаимодействия: Rest, gRpc
<!-- Название ADR состоит из [ADR.###] [Коротко суть принятого решения] -->

* Статус: Предложено
* Владелец: nnshalaeva@mts.ru

## Контекст
<!-- Описание проблемы, требующей решения, причин, побудивших принять решение, ограничений, действовавших на момент принятия решения -->
Необходимо выбрать протокол взаимодействия системы REST или gRps. 

**Сравним протоколы по критериям:**
* **Производительность**: gRPC обеспечивает более высокую производительность, чем REST
* **Сложность**: gRPC имеет более высокую сложность, чем REST
* **Прозрачность**: REST является более прозрачным, чем gRPC, благодаря использованию текстовых форматов данных
* **Надежность**: gRPC обеспечивает более высокую надежность, благодаря встроенной поддержке механизма контроля ошибок и возможности использования протокола HTTP/2, который обеспечивает быструю и надежную передачу данных. REST же не имеет встроенного механизма контроля ошибок, хотя поддерживает протокол HTTP/1.1 и HTTP/2.

## Варианты решения
<!-- Описание рассмотренных вариантов c их плюсами и минусами -->

### Вариант 1. Rest
<!-- Описание варианта 1 -->
* **Плюсы**
  * REST предлагает простую и понятную архитектуру, которая может быть реализована на любом языке программирования.
  * REST позволяет создавать API, которые могут работать с различными типами данных и протоколами.
  * REST может быть легко масштабирован, благодаря использованию протокола HTTP, который поддерживает кэширование и шардирование.
  * REST поддерживает кэширование, что позволяет улучшить производительность и уменьшить нагрузку на сервер.
  * REST не зависит от платформы и может быть использован на любой операционной системе.

* **Минусы**
  * REST имеет ограниченную функциональность по сравнению с другими протоколами, такими как SOAP или gRPC.
  * REST не предоставляет стандартный механизм для версионирования API, что может привести к сложностям при обновлении.
  * REST не имеет встроенной поддержки механизма контроля ошибок, что может привести к возможным проблемам с надежностью.
  * REST поддерживает ограниченный набор типов данных, что может привести к проблемам с совместимостью.
  * REST не обеспечивает встроенную поддержку безопасности, что может привести к проблемам с безопасностью при передаче конфиденциальных данных.

### Вариант 2. gRpc
<!-- Описание варианта 2 -->
* **Плюсы**
    * gRPC работает на протоколе HTTP/2, который обеспечивает высокую скорость передачи данных, мультиплексирование, сжатие и многопоточность.

  * gRPC поддерживает множество языков программирования, что позволяет разработчикам создавать распределенные приложения на любом языке.

  * gRPC предоставляет мощный механизм генерации кода на основе определений интерфейсов, что упрощает разработку и повышает производительность.

  * gRPC совместим со многими платформами и протоколами, что делает его универсальным решением для создания распределенных приложений.

  * gRPC автоматически сериализует данные в протоколе бинарного кодирования protobuf, что позволяет эффективно использовать сетевой трафик и уменьшить нагрузку на сервер.

* **Минусы**
  * gRPC является более сложным протоколом, чем REST, и требует больше времени и усилий на его настройку и использование.

  * gRPC может быть сложным для отладки из-за более сложных механизмов сериализации и десериализации данных.

  * gRPC требует, чтобы все участники взаимодействия использовали protobuf для сериализации данных, что может быть ограничением для совместимости с другими системами.

  * Если у вас уже есть REST API и вы хотите перейти на gRPC, вам придется переписать весь код, что может быть сложным и затратным.

  * Безопасность: gRPC не предоставляет встроенный механизм для обеспечения безопасности, хотя можно использовать TLS для защиты сетевого соединения.


## Решение
<!-- Описание выбранного решения. Решение должно быть сформулировано чётко ("Мы используем...", "Мы не используем", а не "Желательно.." или "Предлагается..."). 
Должна быть понятна связь между решением и проблемой, почему выбрали именно это решение из вариантов -->
Решено использовать REST API 

## Последствия
<!-- Положительные и отрицательные последствия (trade-offs). Арх. решения, которые потребуется принять как следствие принятого решения. Если решение содержит риски, то описано, как с ними планируют поступить (за счет чего снижать, почему принять). -->

### Положительные
Позволит поддерживать прозрачный и понятный интерфейс интеграций 

### Отрицательные
Необходимо будет уделить серьезное внимание работе с ошибками и безопасностью 
